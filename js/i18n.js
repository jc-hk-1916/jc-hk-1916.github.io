const translations = {
    en: {
        'nav.features': 'Features',
        'nav.platforms': 'Platforms',
        'nav.pricing': 'Pricing',
        'nav.download': 'Download',
        'nav.cta': 'Get NaviTerm Free',
        'nav.switchLang': '切换到中文',

        'hero.title1': 'SSH client that',
        'hero.title2': 'works on all',
        'hero.title3': 'Apple devices',
        'hero.subtitle': 'Connect to your servers from Mac, iPhone, or iPad with one tap. Secure, fast, and beautifully designed for Apple ecosystem.',
        'hero.download': 'Download for Free',
        'hero.learnMore': 'Learn More',
        'hero.availableOn': 'Available on',
        'hero.encryption': '256-bit Encryption',
        'hero.fast': 'Fast Connection',

        'brands.label': 'Trusted protocols & standards',

        'features.label': 'Features',
        'features.title1': 'Everything you need to',
        'features.title2': 'manage your servers',
        'features.desc': 'Powerful features designed for developers, sysadmins, and IT professionals.',
        'features.ssh.title': 'SSH Terminal',
        'features.ssh.desc': 'Full-featured terminal emulator with support for colors, Unicode, and custom fonts. Execute commands with lightning-fast response times.',
        'features.ssh.item1': 'Password & Key Authentication',
        'features.ssh.item2': 'Multi-tab Sessions',
        'features.ssh.item3': 'Full Terminal Emulation',
        'features.sftp.title': 'SFTP File Manager',
        'features.sftp.desc': 'Intuitive dual-pane file browser. Upload, download, rename, and manage files with drag-and-drop simplicity.',
        'features.port.title': 'Port Forwarding',
        'features.port.desc': 'Configure local and remote port forwarding. Create SSH tunnels to securely access internal services.',
        'features.key.title': 'Key Management',
        'features.key.desc': 'Import, generate, and manage SSH keys. Support for RSA, ED25519, and encrypted private keys.',
        'features.security.title': 'Secure by Design',
        'features.security.desc': 'End-to-end encryption. Your keys and credentials never leave your device. Zero data collection policy.',

        'platforms.label': 'Cross-Platform',
        'platforms.title1': 'One app,',
        'platforms.title2': 'all Apple devices',
        'platforms.desc': 'Seamlessly switch between your Mac, iPhone, and iPad. Your connections are always with you.',
        'platforms.macos.desc': 'Native Mac app with full keyboard support, Touch Bar integration, and macOS shortcuts.',
        'platforms.macos.badge': 'Apple Silicon Ready',
        'platforms.ipad.desc': 'Optimized for iPad with keyboard support, Split View, and Slide Over multitasking.',
        'platforms.ipad.badge': 'Stage Manager Support',
        'platforms.iphone.desc': 'Full SSH client in your pocket. Quick actions, widgets, and gesture-based navigation.',
        'platforms.iphone.badge': 'Face ID / Touch ID',

        'languages.label': 'Global',
        'languages.title1': 'Speak your',
        'languages.title2': 'language',
        'languages.desc': 'NaviTerm supports 20+ languages including Chinese, English, Japanese, Korean, German, French, Spanish, Arabic, and more.',

        'pricing.label': 'Pricing',
        'pricing.title1': 'Simple,',
        'pricing.title2': 'transparent pricing',
        'pricing.desc': 'Start free, upgrade when you need more.',
        'pricing.free.title': 'Free',
        'pricing.free.period': 'forever',
        'pricing.free.item1': 'Up to 5 hosts',
        'pricing.free.item2': 'SSH Terminal',
        'pricing.free.item3': 'SFTP File Manager',
        'pricing.free.item4': 'Port Forwarding',
        'pricing.free.item5': 'Key Management',
        'pricing.free.cta': 'Get Started',
        'pricing.pro.badge': 'Most Popular',
        'pricing.pro.title': 'Pro Monthly',
        'pricing.pro.period': '/month',
        'pricing.pro.item1': '<strong>Unlimited</strong> hosts',
        'pricing.pro.item2': 'Everything in Free',
        'pricing.pro.item3': 'Offline Mode',
        'pricing.pro.item4': 'Priority Support',
        'pricing.pro.item5': 'Early Access Features',
        'pricing.pro.cta': 'Subscribe Now',
        'pricing.yearly.save': 'Save 75%',
        'pricing.yearly.title': 'Pro Yearly',
        'pricing.yearly.period': '/year',
        'pricing.yearly.item1': '<strong>Unlimited</strong> hosts',
        'pricing.yearly.item2': 'Everything in Monthly',
        'pricing.yearly.item3': 'Best Value',
        'pricing.yearly.item4': 'Priority Support',
        'pricing.yearly.item5': 'All Future Updates',
        'pricing.yearly.cta': 'Get Yearly',

        'cta.title': 'Ready to take control of<br>your servers?',
        'cta.desc': 'Download NaviTerm for free and experience the best SSH client for Apple devices.',
        'cta.button': 'Download on App Store',

        'footer.desc': 'Professional SSH & SFTP client for Apple ecosystem.',
        'footer.product': 'Product',
        'footer.company': 'Company',
        'footer.about': 'About Us',
        'footer.contact': 'Contact',
        'footer.legal': 'Legal',
        'footer.privacy': 'Privacy Policy',
        'footer.terms': 'Terms of Service',
        'footer.copyright': '© 2025 Wuhan Trivix Technology Co., Ltd. All rights reserved.',
        'mobile.home': 'Home'
    },
    zh: {
        'nav.features': '功能',
        'nav.platforms': '平台',
        'nav.pricing': '价格',
        'nav.download': '下载',
        'nav.cta': '免费获取 NaviTerm',
        'nav.switchLang': 'Switch to English',

        'hero.title1': '适用于所有',
        'hero.title2': 'Apple 设备的',
        'hero.title3': 'SSH 客户端',
        'hero.subtitle': '一键连接您的服务器，支持 Mac、iPhone 和 iPad。安全、快速，专为 Apple 生态系统精心设计。',
        'hero.download': '免费下载',
        'hero.learnMore': '了解更多',
        'hero.availableOn': '支持平台',
        'hero.encryption': '256位加密',
        'hero.fast': '快速连接',

        'brands.label': '支持的协议和标准',

        'features.label': '功能特性',
        'features.title1': '管理服务器',
        'features.title2': '所需的一切',
        'features.desc': '为开发者、系统管理员和IT专业人员设计的强大功能。',
        'features.ssh.title': 'SSH 终端',
        'features.ssh.desc': '功能完整的终端模拟器，支持颜色、Unicode 和自定义字体。以极快的响应速度执行命令。',
        'features.ssh.item1': '密码和密钥认证',
        'features.ssh.item2': '多标签会话',
        'features.ssh.item3': '完整终端模拟',
        'features.sftp.title': 'SFTP 文件管理',
        'features.sftp.desc': '直观的双窗格文件浏览器。通过拖放轻松上传、下载、重命名和管理文件。',
        'features.port.title': '端口转发',
        'features.port.desc': '配置本地和远程端口转发。创建 SSH 隧道安全访问内部服务。',
        'features.key.title': '密钥管理',
        'features.key.desc': '导入、生成和管理 SSH 密钥。支持 RSA、ED25519 和加密私钥。',
        'features.security.title': '安全设计',
        'features.security.desc': '端到端加密。您的密钥和凭据永远不会离开设备。零数据收集政策。',

        'platforms.label': '跨平台',
        'platforms.title1': '一个应用',
        'platforms.title2': '所有 Apple 设备',
        'platforms.desc': '在 Mac、iPhone 和 iPad 之间无缝切换。您的连接始终随身携带。',
        'platforms.macos.desc': '原生 Mac 应用，完整支持键盘、Touch Bar 集成和 macOS 快捷键。',
        'platforms.macos.badge': '支持 Apple Silicon',
        'platforms.ipad.desc': '为 iPad 优化，支持键盘、分屏视图和侧拉多任务。',
        'platforms.ipad.badge': '支持台前调度',
        'platforms.iphone.desc': '口袋里的完整 SSH 客户端。快捷操作、小组件和手势导航。',
        'platforms.iphone.badge': 'Face ID / Touch ID',

        'languages.label': '全球化',
        'languages.title1': '使用您的',
        'languages.title2': '母语',
        'languages.desc': 'NaviTerm 支持 20 多种语言，包括中文、英语、日语、韩语、德语、法语、西班牙语、阿拉伯语等。',

        'pricing.label': '价格',
        'pricing.title1': '简单',
        'pricing.title2': '透明的定价',
        'pricing.desc': '免费开始，按需升级。',
        'pricing.free.title': '免费版',
        'pricing.free.period': '永久免费',
        'pricing.free.item1': '最多 5 个主机',
        'pricing.free.item2': 'SSH 终端',
        'pricing.free.item3': 'SFTP 文件管理',
        'pricing.free.item4': '端口转发',
        'pricing.free.item5': '密钥管理',
        'pricing.free.cta': '立即开始',
        'pricing.pro.badge': '最受欢迎',
        'pricing.pro.title': 'Pro 月付',
        'pricing.pro.period': '/月',
        'pricing.pro.item1': '<strong>无限</strong>主机',
        'pricing.pro.item2': '包含免费版所有功能',
        'pricing.pro.item3': '离线模式',
        'pricing.pro.item4': '优先支持',
        'pricing.pro.item5': '抢先体验新功能',
        'pricing.pro.cta': '立即订阅',
        'pricing.yearly.save': '省 75%',
        'pricing.yearly.title': 'Pro 年付',
        'pricing.yearly.period': '/年',
        'pricing.yearly.item1': '<strong>无限</strong>主机',
        'pricing.yearly.item2': '包含月付版所有功能',
        'pricing.yearly.item3': '最超值',
        'pricing.yearly.item4': '优先支持',
        'pricing.yearly.item5': '所有未来更新',
        'pricing.yearly.cta': '获取年付',

        'cta.title': '准备好掌控<br>您的服务器了吗？',
        'cta.desc': '免费下载 NaviTerm，体验 Apple 设备上最好的 SSH 客户端。',
        'cta.button': '在 App Store 下载',

        'footer.desc': '专为 Apple 生态系统打造的专业 SSH 和 SFTP 客户端。',
        'footer.product': '产品',
        'footer.company': '公司',
        'footer.about': '关于我们',
        'footer.contact': '联系我们',
        'footer.legal': '法律',
        'footer.privacy': '隐私政策',
        'footer.terms': '服务条款',
        'footer.copyright': '© 2025 武汉特维克斯科技有限公司 版权所有',
        'mobile.home': '首页'
    }
};

function applyTranslations(lang) {
    document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang] && translations[lang][key]) {
            if (element.tagName === 'INPUT' || element.tagName === 'TEXTAREA') {
                element.placeholder = translations[lang][key];
            } else if (key.includes('item1') || key.includes('item2') || key.includes('item3') || key.includes('item4') || key.includes('item5')) {
                element.innerHTML = translations[lang][key];
            } else if (key === 'cta.title') {
                element.innerHTML = translations[lang][key];
            } else {
                element.textContent = translations[lang][key];
            }
        }
    });

    document.documentElement.lang = lang;
    localStorage.setItem('preferredLanguage', lang);

    const currentLangEl = document.getElementById('currentLang');
    if (currentLangEl) {
        currentLangEl.textContent = lang === 'en' ? 'EN' : '中文';
    }

    const beianEl = document.querySelector('.footer-beian');
    if (beianEl) {
        beianEl.style.display = lang === 'zh' ? 'flex' : 'none';
    }
}

function toggleLanguage() {
    const currentLang = localStorage.getItem('preferredLanguage') || 'en';
    const newLang = currentLang === 'en' ? 'zh' : 'en';
    applyTranslations(newLang);
}

async function detectLanguageByIP() {
    if (localStorage.getItem('preferredLanguage')) {
        return localStorage.getItem('preferredLanguage');
    }

    try {
        const response = await fetch('https://ipapi.co/json/', { timeout: 3000 });
        const data = await response.json();
        const country = data.country_code;

        const chineseRegions = ['CN', 'TW', 'HK', 'MO', 'SG'];
        if (chineseRegions.includes(country)) {
            return 'zh';
        }
    } catch (e) {
        const browserLang = navigator.language || navigator.userLanguage;
        if (browserLang && browserLang.toLowerCase().startsWith('zh')) {
            return 'zh';
        }
    }

    return 'en';
}

document.addEventListener('DOMContentLoaded', async () => {
    const lang = await detectLanguageByIP();
    applyTranslations(lang);
});
